
> dobrada7@0.1.0 test
> vitest "src/App.test.jsx" "--run"


[1m[46m RUN [49m[22m [36mv4.0.13 [39m[90mD:/git/dobrada7[39m

stderr | src/App.test.jsx > App Component > handles file upload and generation flow
TypeError: file.arrayBuffer is not a function
    at handleFileChange (D:/git/dobrada7/src/App.jsx:21:38)
    at HTMLUnknownElement.callCallback (D:\git\dobrada7\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (D:\git\dobrada7\node_modules\jsdom\lib\jsdom\living\generated\EventListener.js:26:30)
    at innerInvokeEventListeners (D:\git\dobrada7\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:360:16)
    at invokeEventListeners (D:\git\dobrada7\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:296:3)
    at HTMLUnknownElementImpl._dispatch (D:\git\dobrada7\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:243:9)
    at HTMLUnknownElementImpl.dispatchEvent (D:\git\dobrada7\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:114:17)
    at HTMLUnknownElement.dispatchEvent (D:\git\dobrada7\node_modules\jsdom\lib\jsdom\living\generated\EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (D:\git\dobrada7\node_modules\react-dom\cjs\react-dom.development.js:4213:16)
    at invokeGuardedCallback (D:\git\dobrada7\node_modules\react-dom\cjs\react-dom.development.js:4277:31)

stderr | src/App.test.jsx > App Component > shows error for empty PDF
TypeError: file.arrayBuffer is not a function
    at handleFileChange (D:/git/dobrada7/src/App.jsx:21:38)
    at HTMLUnknownElement.callCallback (D:\git\dobrada7\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (D:\git\dobrada7\node_modules\jsdom\lib\jsdom\living\generated\EventListener.js:26:30)
    at innerInvokeEventListeners (D:\git\dobrada7\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:360:16)
    at invokeEventListeners (D:\git\dobrada7\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:296:3)
    at HTMLUnknownElementImpl._dispatch (D:\git\dobrada7\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:243:9)
    at HTMLUnknownElementImpl.dispatchEvent (D:\git\dobrada7\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:114:17)
    at HTMLUnknownElement.dispatchEvent (D:\git\dobrada7\node_modules\jsdom\lib\jsdom\living\generated\EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (D:\git\dobrada7\node_modules\react-dom\cjs\react-dom.development.js:4213:16)
    at invokeGuardedCallback (D:\git\dobrada7\node_modules\react-dom\cjs\react-dom.development.js:4277:31)

 [31m‚ùØ[39m src/App.test.jsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[33m 2076[2mms[22m[39m
[31m     [31m√ó[31m renders title and instructions[39m[32m 38[2mms[22m[39m
[31m     [31m√ó[31m handles file upload and generation flow[39m[33m 1019[2mms[22m[39m
[31m     [31m√ó[31m shows error for empty PDF[39m[33m 1018[2mms[22m[39m

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ Failed Tests 3 ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ

 FAIL  src/App.test.jsx > App Component > renders title and instructions
TestingLibraryElementError: Found multiple elements with the text: /DobradA7/i

Here are the matching elements:

Ignored nodes: comments, script, style
<h1>
  DobradA7
</h1>

Ignored nodes: comments, script, style
<span>
  GPLv3 ‚Ä¢ tudo no navegador ‚Ä¢ projeto: DobradA7
</span>

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
<body>
  <div>
    <div
      class="app"
    >
      <header
        class="header"
      >
        <h1>
          DobradA7
        </h1>
        <p
          class="subtitle"
        >
          Transforme seu PDF em um livreto A7 a partir de folhas A4, 100% no navegador. Suporta qualquer quantidade de p√°ginas.
        </p>
      </header>
      <main
        class="card"
      >
        <section
          class="field"
        >
          <label
            class="label"
            for="pdf-input"
          >
            1. Selecione o PDF
          </label>
          <input
            accept="application/pdf"
            id="pdf-input"
            type="file"
          />
        </section>
        <section
          class="field"
        >
          <button
            class="primary-button"
            disabled=""
          >
            2. Gerar livreto A7 (PDF)
          </button>
          <p
            class="hint"
          >
            Imprima em A4 
            <strong>
              paisagem
            </strong>
            , frente e verso (duplex), sem ‚Äúajustar √† p√°gina‚Äù para manter as propor√ß√µes.
          </p>
        </section>
        <section
          class="info"
        >
          <h2>
            Como dobrar / encadernar
          </h2>
          <ol>
            <li>
              Imprima o PDF em A4 paisagem, frente e verso.
            </li>
            <li>
              Primeira dobra ao meio no sentido vertical (A4 ‚Üí A5).
            </li>
            <li>
              Segunda dobra ao meio no sentido horizontal (A5 ‚Üí A6).
            </li>
            <li>
              Terceira dobra ao meio no sentido vertical (A6 ‚Üí A7).
            </li>
            <li>
              Corte com guilhotina os tr√™s lados externos, deixando apenas o lado que une todas as p√°ginas (lombada).
            </li>
          </ol>
          <p
            class="hint"
          >
            Se alguma p√°gina sair de cabe√ßa para baixo, ajuste o mapa em
             
            <code>
              src/imposition.js
            </code>
             e refa√ßa uma prova.
          </p>
        </section>
      </main>
      <footer
        class="footer"
      >
        <span>
          GPLv3 ‚Ä¢ tudo no navegador ‚Ä¢ projeto: DobradA7
        </span>
      </footer>
    </div>
  </div>
</body>
 ‚ùØ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ‚ùØ getElementError node_modules/@testing-library/dom/dist/query-helpers.js:20:35
 ‚ùØ getMultipleElementsFoundError node_modules/@testing-library/dom/dist/query-helpers.js:23:10
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:55:13
 ‚ùØ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ‚ùØ src/App.test.jsx:29:19
     27|   it("renders title and instructions", () => {
     28|     render(<App />);
     29|     expect(screen.getByText(/DobradA7/i)).toBeInTheDocument();
       |                   ^
     30|     expect(screen.getByText(/Selecione o PDF/i)).toBeInTheDocument();
     31|   });

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/3]‚éØ

 FAIL  src/App.test.jsx > App Component > handles file upload and generation flow
TestingLibraryElementError: Unable to find an element with the text: /PDF carregado com 16 p√°ginas/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div>
    <div
      class="app"
    >
      <header
        class="header"
      >
        <h1>
          DobradA7
        </h1>
        <p
          class="subtitle"
        >
          Transforme seu PDF em um livreto A7 a partir de folhas A4, 100% no navegador. Suporta qualquer quantidade de p√°ginas.
        </p>
      </header>
      <main
        class="card"
      >
        <section
          class="field"
        >
          <label
            class="label"
            for="pdf-input"
          >
            1. Selecione o PDF
          </label>
          <input
            accept="application/pdf"
            id="pdf-input"
            type="file"
          />
        </section>
        <section
          class="field"
        >
          <button
            class="primary-button"
            disabled=""
          >
            2. Gerar livreto A7 (PDF)
          </button>
          <p
            class="hint"
          >
            Imprima em A4 
            <strong>
              paisagem
            </strong>
            , frente e verso (duplex), sem ‚Äúajustar √† p√°gina‚Äù para manter as propor√ß√µes.
          </p>
        </section>
        <p
          class="error"
        >
          N√£o foi poss√≠vel ler o PDF. Verifique o arquivo e tente novamente.
        </p>
        <section
          class="info"
        >
          <h2>
            Como dobrar / encadernar
          </h2>
          <ol>
            <li>
              Imprima o PDF em A4 paisagem, frente e verso.
            </li>
            <li>
              Primeira dobra ao meio no sentido vertical (A4 ‚Üí A5).
            </li>
            <li>
              Segunda dobra ao meio no sentido horizontal (A5 ‚Üí A6).
            </li>
            <li>
              Terceira dobra ao meio no sentido vertical (A6 ‚Üí A7).
            </li>
            <li>
              Corte com guilhotina os tr√™s lados externos, deixando apenas o lado que une todas as p√°ginas (lombada).
            </li>
          </ol>
          <p
            class="hint"
          >
            Se alguma p√°gina sair de cabe√ßa para baixo, ajuste o mapa em
             
            <code>
              src/imposition.js
            </code>
             e refa√ßa uma prova.
          </p>
        </section>
      </main>
      <footer
        class="footer"
      >
        <span>
          GPLv3 ‚Ä¢ tudo no navegador ‚Ä¢ projeto: DobradA7
        </span>
      </footer>
    </div>
  </div>
</body>

Ignored nodes: comments, script, style
<html>
  <head />
  <body>
    <div>
      <div
        class="app"
      >
        <header
          class="header"
        >
          <h1>
            DobradA7
          </h1>
          <p
            class="subtitle"
          >
            Transforme seu PDF em um livreto A7 a partir de folhas A4, 100% no navegador. Suporta qualquer quantidade de p√°ginas.
          </p>
        </header>
        <main
          class="card"
        >
          <section
            class="field"
          >
            <label
              class="label"
              for="pdf-input"
            >
              1. Selecione o PDF
            </label>
            <input
              accept="application/pdf"
              id="pdf-input"
              type="file"
            />
          </section>
          <section
            class="field"
          >
            <button
              class="primary-button"
              disabled=""
            >
              2. Gerar livreto A7 (PDF)
            </button>
            <p
              class="hint"
            >
              Imprima em A4 
              <strong>
                paisagem
              </strong>
              , frente e verso (duplex), sem ‚Äúajustar √† p√°gina‚Äù para manter as propor√ß√µes.
            </p>
          </section>
          <p
            class="error"
          >
            N√£o foi poss√≠vel ler o PDF. Verifique o arquivo e tente novamente.
          </p>
          <section
            class="info"
          >
            <h2>
              Como dobrar / encadernar
            </h2>
            <ol>
              <li>
                Imprima o PDF em A4 paisagem, frente e verso.
              </li>
              <li>
                Primeira dobra ao meio no sentido vertical (A4 ‚Üí A5).
              </li>
              <li>
                Segunda dobra ao meio no sentido horizontal (A5 ‚Üí A6).
              </li>
              <li>
                Terceira dobra ao meio no sentido vertical (A6 ‚Üí A7).
              </li>
              <li>
                Corte com guilhotina os tr√™s lados externos, deixando apenas o lado que une todas as p√°ginas (lombada).
              </li>
            </ol>
            <p
              class="hint"
            >
              Se alguma p√°gina sair de cabe√ßa para baixo, ajuste o mapa em
               
              <code>
                src/imposition.js
              </code>
               e refa√ßa uma prova.
            </p>
          </section>
        </main>
        <footer
          class="footer"
        >
          <span>
            GPLv3 ‚Ä¢ tudo no navegador ‚Ä¢ projeto: DobradA7
          </span>
        </footer>
      </div>
    </div>
  </body>
</html>
 ‚ùØ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 ‚ùØ src/App.test.jsx:61:11
     59| 
     60|     // Wait for status update
     61|     await waitFor(() => {
       |           ^
     62|       expect(
     63|         screen.getByText(/PDF carregado com 16 p√°ginas/i)

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[2/3]‚éØ

 FAIL  src/App.test.jsx > App Component > shows error for empty PDF
TestingLibraryElementError: Unable to find an element with the text: /O PDF parece estar vazio/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div>
    <div
      class="app"
    >
      <header
        class="header"
      >
        <h1>
          DobradA7
        </h1>
        <p
          class="subtitle"
        >
          Transforme seu PDF em um livreto A7 a partir de folhas A4, 100% no navegador. Suporta qualquer quantidade de p√°ginas.
        </p>
      </header>
      <main
        class="card"
      >
        <section
          class="field"
        >
          <label
            class="label"
            for="pdf-input"
          >
            1. Selecione o PDF
          </label>
          <input
            accept="application/pdf"
            id="pdf-input"
            type="file"
          />
        </section>
        <section
          class="field"
        >
          <button
            class="primary-button"
            disabled=""
          >
            2. Gerar livreto A7 (PDF)
          </button>
          <p
            class="hint"
          >
            Imprima em A4 
            <strong>
              paisagem
            </strong>
            , frente e verso (duplex), sem ‚Äúajustar √† p√°gina‚Äù para manter as propor√ß√µes.
          </p>
        </section>
        <p
          class="error"
        >
          N√£o foi poss√≠vel ler o PDF. Verifique o arquivo e tente novamente.
        </p>
        <section
          class="info"
        >
          <h2>
            Como dobrar / encadernar
          </h2>
          <ol>
            <li>
              Imprima o PDF em A4 paisagem, frente e verso.
            </li>
            <li>
              Primeira dobra ao meio no sentido vertical (A4 ‚Üí A5).
            </li>
            <li>
              Segunda dobra ao meio no sentido horizontal (A5 ‚Üí A6).
            </li>
            <li>
              Terceira dobra ao meio no sentido vertical (A6 ‚Üí A7).
            </li>
            <li>
              Corte com guilhotina os tr√™s lados externos, deixando apenas o lado que une todas as p√°ginas (lombada).
            </li>
          </ol>
          <p
            class="hint"
          >
            Se alguma p√°gina sair de cabe√ßa para baixo, ajuste o mapa em
             
            <code>
              src/imposition.js
            </code>
             e refa√ßa uma prova.
          </p>
        </section>
      </main>
      <footer
        class="footer"
      >
        <span>
          GPLv3 ‚Ä¢ tudo no navegador ‚Ä¢ projeto: DobradA7
        </span>
      </footer>
    </div>
  </div>
</body>

Ignored nodes: comments, script, style
<html>
  <head />
  <body>
    <div>
      <div
        class="app"
      >
        <header
          class="header"
        >
          <h1>
            DobradA7
          </h1>
          <p
            class="subtitle"
          >
            Transforme seu PDF em um livreto A7 a partir de folhas A4, 100% no navegador. Suporta qualquer quantidade de p√°ginas.
          </p>
        </header>
        <main
          class="card"
        >
          <section
            class="field"
          >
            <label
              class="label"
              for="pdf-input"
            >
              1. Selecione o PDF
            </label>
            <input
              accept="application/pdf"
              id="pdf-input"
              type="file"
            />
          </section>
          <section
            class="field"
          >
            <button
              class="primary-button"
              disabled=""
            >
              2. Gerar livreto A7 (PDF)
            </button>
            <p
              class="hint"
            >
              Imprima em A4 
              <strong>
                paisagem
              </strong>
              , frente e verso (duplex), sem ‚Äúajustar √† p√°gina‚Äù para manter as propor√ß√µes.
            </p>
          </section>
          <p
            class="error"
          >
            N√£o foi poss√≠vel ler o PDF. Verifique o arquivo e tente novamente.
          </p>
          <section
            class="info"
          >
            <h2>
              Como dobrar / encadernar
            </h2>
            <ol>
              <li>
                Imprima o PDF em A4 paisagem, frente e verso.
              </li>
              <li>
                Primeira dobra ao meio no sentido vertical (A4 ‚Üí A5).
              </li>
              <li>
                Segunda dobra ao meio no sentido horizontal (A5 ‚Üí A6).
              </li>
              <li>
                Terceira dobra ao meio no sentido vertical (A6 ‚Üí A7).
              </li>
              <li>
                Corte com guilhotina os tr√™s lados externos, deixando apenas o lado que une todas as p√°ginas (lombada).
              </li>
            </ol>
            <p
              class="hint"
            >
              Se alguma p√°gina sair de cabe√ßa para baixo, ajuste o mapa em
               
              <code>
                src/imposition.js
              </code>
               e refa√ßa uma prova.
            </p>
          </section>
        </main>
        <footer
          class="footer"
        >
          <span>
            GPLv3 ‚Ä¢ tudo no navegador ‚Ä¢ projeto: DobradA7
          </span>
        </footer>
      </div>
    </div>
  </body>
</html>
 ‚ùØ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 ‚ùØ src/App.test.jsx:96:11
     94|     fireEvent.change(input, { target: { files: [file] } });
     95| 
     96|     await waitFor(() => {
       |           ^
     97|       expect(screen.getByText(/O PDF parece estar vazio/i)).toBeInTheD‚Ä¶
     98|     });

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[3/3]‚éØ


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m3 failed[39m[22m[90m (3)[39m
[2m   Start at [22m 10:16:46
[2m   Duration [22m 3.88s[2m (transform 68ms, setup 0ms, collect 635ms, tests 2.08s, environment 934ms, prepare 23ms)[22m

